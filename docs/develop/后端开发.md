基于 `go-kratos` 项目搭建的后端，具备一定的知识有利于开发。

## 相关目录说明
- `api/interface` 定义了用户相关接口。
- `app/interface` 为用户端相关业务逻辑的实现。
- `tools/gen` CRUD 代码生成工具，可以便捷地生成biz、data目录的标准http方法代码。
- `tools/protoc-gen-go-http` 在原有 go-kratos 的基础上增加通过yaml文件指定接口所使用的中间件。
- `scripts/db` 定义数据库相关SQL建表语句。
- `web` 前端工程。
- `data` 目录，在docker启动后生成，为docker数据库相关数据的持久化。

## 开发流程 & 启动流程
1. 安装 Docker、Golang。
2. 在项目根目录中执行 `docker compose up` 命令，会启动项目。
3. 浏览器打开 `localhost:9500`，将 `scripts/db` 的SQL文件放在 jnoj 数据库中执行。
4. 通过命令行进入 `app/interface` 目录，执行 `make init` 安装一些依赖项。
5. 通过命令行进入 `tools/protoc-gen-go-http`，执行 `go install` 替换原有 go-kratos 的 protoc-http 插件。
6. 在 `api/interface` 基于 protobuf 定义所需接口。
7. 在 `app/interface` 中编写你的代码，并在此目录中执行 `make http` 以基于 `api` 目录中的 `proto` 文件生成对应的 `go` 文件。
8. 通过执行 `docker restart api` 即可让后端的改动生效。

## 其它说明
1. 接口鉴权中间件的使用，如何获取用户ID？
> 需要在接口定义的 proto 文件下建立一个同名的 yaml 文件，可参考已有的文件。执行 `make http` 时，生成的 `http.pb.go` 中会加入jwt鉴权。在业务代码中，可通过 `jnoj/internal/middleware/auth.GetUserID(ctx)` 来获取到携带 jwt 的用户ID。
