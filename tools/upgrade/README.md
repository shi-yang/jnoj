# v1升级v2小工具

该小工具用于将 V1 升级为 V2。通过该小工具，升级不会对旧有服务的使用产生任何影响。主要迁移为：

- 数据库迁移。新建一个数据库，会将旧有数据导入到新数据库中。
- 测试点迁移。将现有测试点文件导入到新OJ中。

迁移后，在新OJ中进行测试，如没有使用问题，再对旧有OJ进行停用。

注意：在该升级方式中，这两个OJ在不同的数据库中，如果同时使用会导致数据不一致。在你不删除旧OJ数据的情况下，新OJ测试期间的任何问题也不会对旧OJ产生影响。

## 使用方式

1. 创建一个新的数据库。
2. 编辑 `main.go` 文件中 `oldSource`、`newSource` 这两个变量，分别为旧数据库地址、新数据库地址。
3. 执行 `docker exec -it jnoj-api-1 bash` 命令，进入 `jnoj-api-1` 容器。
4. 执行 `cd tools/upgrade && go run *.go` 命令。
