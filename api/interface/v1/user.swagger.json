{
  "swagger": "2.0",
  "info": {
    "title": "v1/user.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "UserService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/captcha": {
      "get": {
        "summary": "获取验证码",
        "operationId": "UserService_GetCaptcha",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "phone",
            "description": "手机号",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "email",
            "description": "邮箱",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/login": {
      "post": {
        "summary": "登录",
        "operationId": "UserService_Login",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userLoginResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/userLoginRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/register": {
      "post": {
        "summary": "注册",
        "operationId": "UserService_Register",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userRegisterResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/userRegisterRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/user/info": {
      "get": {
        "summary": "获取登录用户信息",
        "operationId": "UserService_GetUserInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userGetUserInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}": {
      "get": {
        "summary": "获取用户主页信息",
        "operationId": "UserService_GetUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1userUser"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      },
      "put": {
        "summary": "修改用户信息",
        "operationId": "UserService_UpdateUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1userUser"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "nickname": {
                  "type": "string"
                },
                "location": {
                  "type": "string"
                },
                "bio": {
                  "type": "string"
                },
                "gender": {
                  "type": "integer",
                  "format": "int32"
                },
                "school": {
                  "type": "string"
                },
                "birthday": {
                  "type": "string",
                  "format": "date-time"
                },
                "company": {
                  "type": "string"
                },
                "job": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/avatar": {
      "post": {
        "summary": "修改用户头像",
        "operationId": "UserService_UpdateUserAvatar",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userUpdateUserAvatarResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "avatarFile": {
                  "type": "string"
                },
                "avatarName": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/password": {
      "put": {
        "summary": "修改用户密码",
        "operationId": "UserService_UpdateUserPassword",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "oldPassword": {
                  "type": "string"
                },
                "newPassword": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/profile": {
      "get": {
        "summary": "获取用户信息",
        "operationId": "UserService_GetUserProfile",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userUserProfile"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/profile_calendar": {
      "get": {
        "summary": "用户主页提交统计",
        "operationId": "UserService_GetUserProfileCalendar",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userGetUserProfileCalendarResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "year",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/profile_count": {
      "get": {
        "summary": "用户主页统计",
        "operationId": "UserService_GetUserProfileCount",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userGetUserProfileCountResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/profile_problemsolved": {
      "get": {
        "summary": "用户主页做题进度",
        "operationId": "UserService_GetUserProfileProblemSolved",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userGetUserProfileProblemSolvedResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "type",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "PROBLEMSET",
              "CONTEST",
              "GROUP"
            ],
            "default": "PROBLEMSET"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "perPage",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/users/{id}/profile_user_badges": {
      "get": {
        "summary": "用户主页勋章成就",
        "operationId": "UserService_ListUserProfileUserBadges",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/userListUserProfileUserBadgesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    }
  },
  "definitions": {
    "GetUserProfileCalendarResponseProfileCalendar": {
      "type": "object",
      "properties": {
        "date": {
          "type": "string"
        },
        "count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "GetUserProfileCountResponseContestRanking": {
      "type": "object",
      "properties": {
        "contestId": {
          "type": "integer",
          "format": "int32"
        },
        "name": {
          "type": "string"
        },
        "ranking": {
          "type": "integer",
          "format": "int32"
        },
        "rating": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "GetUserProfileProblemSolvedResponseProblemStatus": {
      "type": "string",
      "enum": [
        "NOT_START",
        "INCORRECT",
        "CORRECT"
      ],
      "default": "NOT_START"
    },
    "UserUserRole": {
      "type": "string",
      "enum": [
        "REGULAR_USER",
        "VIP_USER",
        "OFFICIAL_USER",
        "ADMIN",
        "SUPER_ADMIN"
      ],
      "default": "REGULAR_USER"
    },
    "googlerpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "protobufNullValue": {
      "type": "string",
      "enum": [
        "NULL_VALUE"
      ],
      "default": "NULL_VALUE",
      "description": "`NullValue` is a singleton enumeration to represent the null value for the\n`Value` type union.\n\n The JSON representation for `NullValue` is JSON `null`.\n\n - NULL_VALUE: Null value."
    },
    "userGetUserInfoResponse": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32"
        },
        "nickname": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "permissions": {
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      }
    },
    "userGetUserProfileCalendarResponse": {
      "type": "object",
      "properties": {
        "activeYears": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int32"
          }
        },
        "submissionCalendar": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GetUserProfileCalendarResponseProfileCalendar"
          }
        },
        "totalActiveDays": {
          "type": "integer",
          "format": "int32"
        },
        "totalSubmission": {
          "type": "integer",
          "format": "int32"
        },
        "totalProblemSolved": {
          "type": "integer",
          "format": "int32"
        },
        "start": {
          "type": "string"
        },
        "end": {
          "type": "string"
        }
      }
    },
    "userGetUserProfileCountResponse": {
      "type": "object",
      "properties": {
        "problemSolved": {
          "type": "integer",
          "format": "int32"
        },
        "contestRating": {
          "type": "integer",
          "format": "int32"
        },
        "contestRankingHistory": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GetUserProfileCountResponseContestRanking"
          }
        }
      }
    },
    "userGetUserProfileProblemSolvedRequestType": {
      "type": "string",
      "enum": [
        "PROBLEMSET",
        "CONTEST",
        "GROUP"
      ],
      "default": "PROBLEMSET"
    },
    "userGetUserProfileProblemSolvedResponse": {
      "type": "object",
      "properties": {
        "problemsets": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseProblemset"
          }
        },
        "contests": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseContest"
          }
        },
        "groups": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseGroup"
          }
        },
        "total": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "userGetUserProfileProblemSolvedResponseContest": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "title": "比赛ID"
        },
        "name": {
          "type": "string",
          "title": "比赛名称"
        },
        "groupName": {
          "type": "string",
          "title": "小组名称"
        },
        "groupId": {
          "type": "integer",
          "format": "int32",
          "title": "小组ID"
        },
        "count": {
          "type": "integer",
          "format": "int32",
          "title": "用户完成数"
        },
        "total": {
          "type": "integer",
          "format": "int32",
          "title": "比赛题目总数"
        },
        "problems": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseProblem"
          }
        }
      }
    },
    "userGetUserProfileProblemSolvedResponseGroup": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32"
        },
        "name": {
          "type": "string"
        },
        "count": {
          "type": "integer",
          "format": "int32",
          "title": "用户完成数"
        },
        "total": {
          "type": "integer",
          "format": "int32",
          "title": "比赛题目总数"
        },
        "contests": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseContest"
          }
        }
      }
    },
    "userGetUserProfileProblemSolvedResponseProblem": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32"
        },
        "status": {
          "$ref": "#/definitions/GetUserProfileProblemSolvedResponseProblemStatus"
        }
      }
    },
    "userGetUserProfileProblemSolvedResponseProblemset": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "title": "题单ID"
        },
        "name": {
          "type": "string",
          "title": "题单名称"
        },
        "count": {
          "type": "integer",
          "format": "int32",
          "title": "用户完成数"
        },
        "total": {
          "type": "integer",
          "format": "int32",
          "title": "题单总数"
        },
        "problems": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userGetUserProfileProblemSolvedResponseProblem"
          }
        }
      }
    },
    "userListUserProfileUserBadgesResponse": {
      "type": "object",
      "properties": {
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/userUserBadge"
          }
        },
        "total": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "userLoginRequest": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    },
    "userLoginResponse": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        }
      }
    },
    "userRegisterRequest": {
      "type": "object",
      "properties": {
        "phone": {
          "type": "string",
          "title": "手机号"
        },
        "email": {
          "type": "string",
          "title": "邮箱"
        },
        "username": {
          "type": "string",
          "title": "用户名"
        },
        "captcha": {
          "type": "string",
          "title": "验证码"
        },
        "password": {
          "type": "string",
          "title": "密码"
        }
      }
    },
    "userRegisterResponse": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "title": "用户ID"
        },
        "token": {
          "type": "string",
          "title": "登录 token"
        }
      }
    },
    "userUpdateUserAvatarResponse": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string"
        }
      }
    },
    "userUserBadge": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32"
        },
        "name": {
          "type": "string"
        },
        "image": {
          "type": "string"
        },
        "imageGif": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/userUserBadgeType"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "userUserBadgeType": {
      "type": "string",
      "enum": [
        "ACTIVITY",
        "LEVEL",
        "CONTEST"
      ],
      "default": "ACTIVITY"
    },
    "userUserProfile": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string"
        },
        "bio": {
          "type": "string"
        },
        "gender": {
          "type": "integer",
          "format": "int32"
        },
        "school": {
          "type": "string"
        },
        "birthday": {
          "type": "string",
          "format": "date-time"
        },
        "company": {
          "type": "string"
        },
        "job": {
          "type": "string"
        }
      }
    },
    "v1userUser": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32"
        },
        "nickname": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "realname": {
          "type": "string"
        },
        "role": {
          "$ref": "#/definitions/UserUserRole"
        },
        "avatar": {
          "type": "string"
        }
      }
    }
  }
}
